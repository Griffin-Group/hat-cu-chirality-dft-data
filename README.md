# DFT data for "Tuning Interface Electronic Properties via Chiral 2D Metal-Organic Frameworks"

This is a repository containing the density functional theory (DFT) data for
our project on investigating the scanning tunnelling microscopy and spectroscopy
(STM and STS) signatures of a 2D metal-organic framework (MOF) with chiral
distortions on a silver substrate.
Namely, we investigated hexaazatriphenylene coordinated to Cu atoms (HAT-Cu).
The primary goal of the DFT calculations were to obtain band structures and
simulated STM images.

Paper authors:
Julian Ceddia, Bernard Field, Jack Hellerstedt, Sebastian O. Fürer,
Benjamin Lowe, Udo Bach, Sinéad Griffin, Agustin Schiffrin

For questions regarding this dataset specifically, contact Bernard Field or Sinéad Griffin.

## Computational info

All work in this repository was performed by Bernard Field (myself).
Calculations were performed on National Computing Institute (NCI) Australia's
Gadi and the National Energy Research Scientific Computing Center's (NERSC's)
Perlmutter supercomputing clusters.

The density functional theory (DFT) calculations were performed using the
Vienna Ab initio Simulation Package (VASP).
Most calculations used VASP version 5.4.4, except for the 5-layer Ag slab
calculations which used version 6.4.3.
Convergence parameters were largely estimated from Bernard's prior work
on dicyanoanthracene-copper, a similar system.
[[1](https://doi.org/10.1038/s41524-022-00918-0),[2](https://doi.org/10.1002/adfm.202106474)]

Manual dos splitting (`dos_split`, `dos_sum_np`, etc.) performed using VTST Tools by the Henkelman Group (https://theory.cm.utexas.edu/vtsttools/).

Plotting of DOS and band structures performed using sumo,
Alex M. Ganose, Adam J. Jackson, David O. Scanlon. sumo: Command-line tools for plotting and analysis of periodic ab initio calculations. Journal of Open Source Software, 2018 3 (28), 717, doi:10.21105/joss.00717.

## Structures

Initial structures for the free-standing achiral (`HAT-Cu_free`), pinwheel
(`HAT-Cu_PW`), and Y (`HAT-Cu_Y`) phases were provided by Julian Ceddia
as scripts which generated idealised structures with the observed tilting
of molecular units. The atomic coordinates were relaxed while keeping unit
cells fixed (allowing unit cells to relax caused the MOF to fold up).

The initial structure of HAT-Cu on the 3-layer Ag(111) slab (`HAT-Cu-AgSlab`)
was generated by placing the unrelaxed free-standing achiral HAT-Cu structure
on top of a pre-relaxed Ag(111) slab. The chosen lattice constant of the
Ag(111) slab is slightly (1.5%) higher than the experimental lattice constant,
and appears to correspond to a value I determined in a DFT relaxation long-ago
(rounded to 3 decimal places).

The initial structure of HAT-Cu on the 5-layer Ag(111) slab (`HAT-Cu-AgSlab5`)
was generated by inserting two extra layers of Ag between the bottom Ag layer
and the passivating hydrogen layer of the relaxed `HAT-Cu-AgSlab` structure.

## Calculation workflow

For each system, the structure was relaxed repeatedly until the forces
were converged. In some cases, an initial relaxation at a lower k-point density
was performed followed by a relaxation at the full k-point density.
These calculations are in the `relax` directories.

Then, a self-consistent field calculation was performed to compute the charge
density (CHGCAR), in the `chg` directories.

Several non-self-consistent calculations were then performed:
band structures (`bands`), density of states at higher k-point sampling (`dos`),
and band-projected charge density calculations (`parchg`).

## Data

The outputs of each DFT calculation are zipped together, for compression,
although `vasprun.xml` and `PARCHG` files a gzipped separately.
To enable distribution of this repository, larger files have been archived
separately, and large files essential for generating the figures have been
down-sampled.

The original larger files can be obtained on request.
They are stored on NERSC's HPSS system as
`hat-cu-chirality-dft-data-large-files.tar` under the user `bfield`.
This archive file, placed in the root directory of this repository, can be
extracted to place all files in their appropriate directories.
This archive contains:
- CHGCAR's for the self-consistent field calculations.
- PARCHG's for the band-projected charge density calculations.
- OUTCAR's for the full relaxation trajectories.
- PROCAR's for the band and DOS calculations.
- vasprun.xml's for the Ag slab band and DOS calculations.

Down-sampled PARCHG's and vasprun.xml's are provided to allow plotting of data
even without the original larger files. These files, and their derived figures,
contain `_ds` in their filenames.
Specifically, the down-sampled PARCHG files have reduced significant figures
and FFT grids, the down-sampled vasprun.xml's for the Ag slab band calculations
have reduced significant figures for the projected eigenvalues and removed the
partial DOS, and the down-sampled vasprun.xml's for the Ag slab DOS calculations
have removed the projected eigenvalues (keeping just the DOS).
The quality of the DOS is unaffected by this down-sampling, although the quality
of the bands and the PARCHG's are slightly reduced.

`DOS.SUM.HAT` was created using `dos_split` and `dos_sum_np` from the
[VTST Tools](https://theory.cm.utexas.edu/vtsttools/) by the Henkelman Group,
with summation specified by the `dos.sh` file in the respective directories.
It can be recreated by any appropriate tool for manipulating `DOSCAR` or
`vasprun.xml` files.

## Licenses and citation

Code files (`.py`, `.sh,`, `.awk`, `.gnuplot`) in the root and `figures/`
directories are provided under the MIT license unless otherwise specified.
Unless otherwise specified, these files are Copyright Bernard Field 2025.
(`downsample_parchg.py`, `figures/sumo_band_projections.py`, and `figures/stm.py`
contain code from third-parties, so contain additional copyright.)

`figures/stm.py` is provided the
[GNU Lesser General Public License](https://www.gnu.org/licenses/lgpl-3.0.html)
(LGPL), because it is directly derived from the
[Atomic Simulation Environment](https://wiki.fysik.dtu.dk/ase/index.html) (ASE).

The remaining files (calculation data, figures) are provided under
[Creative Commons Attribution 4.0 International](https://creativecommons.org/licenses/by/4.0/)
(CC-BY 4.0).

If you use the code or data, please cite the paper associated with this repository:

    J. Ceddia et. al, "Tuning Interface Electronic Properties via Chiral 2D Metal-Organic Frameworks", in preparation (2025)

## Acknowledgements

Computational resources provided by National Computing Institute (NCI) Australia and by National Energy Research Scientific Computing Center (NERSC), USA.

Molecular Foundry User Proposal.

## Bibliography
